
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Big style CSS3 registration form</title>
        <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen"/>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />	
		<style type="text/css">				
			form.registration{
  			  width:600px;
  			  float:left;
  			  color:#818181;
  				background: #f1f1f1 no-repeat top right;
  				border: 2px solid #ccc;
  				padding:10px;
  				font-family: Georgia;
  				font-size: 14px;
  				-moz-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
  				-webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
  				-moz-border-radius: 15px;
  				-webkit-border-radius: 15px;
			}
			form.registration fieldset{
			    border-top:1px solid #ccc;
			    border-left:0;
			    border-bottom:0;
			    border-right:0;
			    padding:6px;
			    margin:0px 30px 0px 0px;
			}
			form.registration legend{
			    text-align:left;
			    color:#ccc;
			    font-size:18px;
			    padding:0px 4px 0px 4px;
			    margin-left:20px;
			}

			form.registration label{
				  font-size: 32px;
			    width:200px;
			    float: left;
			    text-align: right;
			    color:#999;
			    clear:left;
			    margin:4px 4px 0px 0px;
			    padding:0px;
			}
			form.registration input{
				  font-family: Georgia;
				  font-size: 28px;
			    float:left;
			    width:300px;
			    border:1px solid #cccccc;
			    margin:2px 0px 2px 2px;
			    color:#00abdf;
			    height:32px;
			    padding:3px;
				  -moz-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
				  -webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
				  -webkit-border-radius: 5px;
				  -moz-border-radius: 5px;
			}

			form.registration textarea{
				  font-family: Georgia;
				  font-size: 28px;
			    float:left;
			    width:300px;
			    border:1px solid #cccccc;
			    margin:2px 0px 2px 2px;
			    color:#00abdf;
			    height:150px;
			    padding:3px;
				  -moz-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
				  -webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
				  -webkit-border-radius: 5px;
				  -moz-border-radius: 5px;
			}
			form.registration input:focus, form.registration select:focus{
				  background-color:#E0E6FF;
			}
			form.registration select{
				  font-family: Georgia;
				  font-size: 28px;
			    float:left;
			    border:1px solid #cccccc;
			    margin:2px 0px 2px 2px;
			    color:#00abdf;
				  height:40px;
				  -moz-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
				  -webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
				  -webkit-border-radius: 5px;
				  -moz-border-radius: 5px;
			}
			.button, .button:visited{
				  float:right;
				  text-shadow: 0 -1px 1px rgba(0,0,0,0.25);
				  border-bottom: 1px solid rgba(0,0,0,0.25);
				  cursor: pointer;
				  padding: 5px 10px 5px 5px; 
				  color: #fff; 
				  text-decoration: none;
				  font-size: 32px; padding: 10px 15px; 
				  background-color: #00abdf;
			    display: inline-block; 	
			   	-moz-border-radius: 10px; 
  				-webkit-border-radius: 10px;
  				-moz-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
  				-webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.5);
			}
			.button:hover{ 
				  background-color: #777; 
			}
		</style>
        <script type="text/javascript">
		var name = getUrlVars()["name"];
		var email = getUrlVars()["email"];
		var gender = getUrlVars()["gender"];
		var id = getUrlVars()["id"];
		var firstname = getUrlVars()["firstname"];
		var middlename = getUrlVars()["middlename"];
		var lastname = getUrlVars()["lastname"];
		
		function getUrlVars() {
    		var vars = {};
    		var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
       			vars[key] = value;
   			});
    		return vars;
		}
		
		function load() {
			if(firstname!='undefined') document.getElementById("firstname").value=firstname;
			if(middlename!='undefined') document.getElementById("middlename").value=middlename;
			if(lastname!='undefined') document.getElementById("lastname").value=lastname;
			if(gender="male") {
				document.getElementById("sex").value=2;
			}
			if(email!='undefined') document.getElementById("email").value=email;
			if (window.XMLHttpRequest)
  			{// code for IE7+, Firefox, Chrome, Opera, Safari
  				xmlhttp=new XMLHttpRequest();
  			}
			else
  			{// code for IE6, IE5
  				xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  			}
			xmlhttp.onreadystatechange=function()
  			{
  				if (xmlhttp.readyState==4 && xmlhttp.status==200)
    			{
					var xmlDoc=xmlhttp.responseText;
					var firstname=xmlDoc.substring(xmlDoc.indexOf('<firstname>')+11,xmlDoc.indexOf('</firstname>'));
					var middlename=xmlDoc.substring(xmlDoc.indexOf('<middlename>')+12,xmlDoc.indexOf('</middlename>'));
					var lastname=xmlDoc.substring(xmlDoc.indexOf('<lastname>')+10,xmlDoc.indexOf('</lastname>'));
					var sex=xmlDoc.substring(xmlDoc.indexOf('<sex>')+5,xmlDoc.indexOf('</sex>'));
					var birthday=xmlDoc.substring(xmlDoc.indexOf('<birthday>')+10,xmlDoc.indexOf('</birthday>'));
					var birthmonth=xmlDoc.substring(xmlDoc.indexOf('<birthmonth>')+12,xmlDoc.indexOf('</birthmonth>'));
					var birthyear=xmlDoc.substring(xmlDoc.indexOf('<birthyear>')+11,xmlDoc.indexOf('</birthyear>'));
					var address=xmlDoc.substring(xmlDoc.indexOf('<address>')+9,xmlDoc.indexOf('</address>'));
					var city=xmlDoc.substring(xmlDoc.indexOf('<city>')+6,xmlDoc.indexOf('</city>'));
					var state=xmlDoc.substring(xmlDoc.indexOf('<state>')+7,xmlDoc.indexOf('</state>'));
					var zipcode=xmlDoc.substring(xmlDoc.indexOf('<zipcode>')+9,xmlDoc.indexOf('</zipcode>'));
					var email=xmlDoc.substring(xmlDoc.indexOf('<email>')+7,xmlDoc.indexOf('</email>'));
					var phone=xmlDoc.substring(xmlDoc.indexOf('<phone>')+7,xmlDoc.indexOf('</phone>'));
					var medication=xmlDoc.substring(xmlDoc.indexOf('<medication>')+12,xmlDoc.indexOf('</medication>'));
					var familyhistory=xmlDoc.substring(xmlDoc.indexOf('<familyhistory>')+15,xmlDoc.indexOf('</familyhistory>'));
					if(firstname!='>') document.getElementById("firstname").value=firstname;
					if(middlename!='>') document.getElementById("middlename").value=middlename;
					if(lastname!='>') document.getElementById("lastname").value=lastname;
					if(sex!='>') document.getElementById("sex").value=sex;
					if(birthday!='>') document.getElementById("birthday").value=birthday;
					if(birthmonth!='>') document.getElementById("birthmonth").value=birthmonth;
					if(birthyear!='>') document.getElementById("birthyear").value=2013-birthyear;
					if(address!='>') document.getElementById("address").value=address;
					if(city!='>') document.getElementById("city").value=city;
					if(state!='>') document.getElementById("state").value=state;
					if(zipcode!='>') document.getElementById("zipcode").value=zipcode;
					if(email!='>') document.getElementById("email").value=email;
					if(phone!='>') document.getElementById("phone").value=phone;
					if(medication!='>') document.getElementById("medication").value=medication;
					if(familyhistory!='>') document.getElementById("familyhistory").value=familyhistory;
   				}
			}
			xmlhttp.open("GET","record.php?id="+id,true);
			xmlhttp.send();
		}
		
		function connectPatient() {
			record();
		}
		
		function record()
		{
			if (window.XMLHttpRequest)
  			{// code for IE7+, Firefox, Chrome, Opera, Safari
  				xmlhttp=new XMLHttpRequest();
  			}
			else
  			{// code for IE6, IE5
  				xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  			}
			xmlhttp.onreadystatechange=function()
  			{
  				if (xmlhttp.readyState==4 && xmlhttp.status==200)
    			{
					window.open("/PatientSelect.html?id=" + id,'_self');
   				}
			}
			var firstnameField = document.getElementById("firstname").value;
			var middlenameField = document.getElementById("middlename").value;
			var lastnameField = document.getElementById("lastname").value;
			var sexField = document.getElementById("sex").value;
			var birthdayField = document.getElementById("birthday").value;
			var birthmonthField = document.getElementById("birthmonth").value;
			var birthyearField = 2013-document.getElementById("birthyear").value;
			var addressField = document.getElementById("address").value;
			var cityField = document.getElementById("city").value;
			var stateField = document.getElementById("state").value;
			var zipcodeField = document.getElementById("zipcode").value;
			var emailField = document.getElementById("email").value;
			var phoneField = document.getElementById("phone").value;
			var medicationField = document.getElementById("medication").value;
			var familyhistoryField = document.getElementById("familyhistory").value;
			xmlhttp.open("GET","getrecords.php?firstname="+firstnameField+"&middlename="+middlenameField+"&lastname="+lastnameField+"&sex="+sexField+"&birthday="+birthdayField+"&birthmonth="+birthmonthField+"&birthyear="+birthyearField+"&address="+addressField+"&city="+cityField+"&state="+stateField+"&zipcode="+zipcodeField+"&email="+emailField+"&phone="+phoneField+"&medication="+medicationField+"&familyhistory="+familyhistoryField+"&id="+id,true);
			xmlhttp.send();
		}
  		</script>
	</head>
	<body onload="load()">
    <div id="form">
    <form class="registration">
        <fieldset>
            <legend>Personal Information</legend>
            <label>First name</label>
            <input id="firstname" type="text" maxlength="100" value=""/>           
            <label>Middle name</label>
            <input id="middlename" type="text" maxlength="100" value=""/>  
            <label>Last name</label>
            <input id="lastname" type="text" maxlength="100" value=""/>  
            <label>Sex</label>
            <select id="sex">
                <option value="1">F</option> 
                <option value="2">M</option>                            
            </select>                                
            <label>Birthdate</label>
            <select id="birthmonth">                               
                <option value="1">January</option>
                <option value="2">February</option>
                <option value="3">March</option>
                <option value="4">April</option>
                <option value="5">May</option>
                <option value="6">June</option>
                <option value="7">July</option>
                <option value="8">August</option>
                <option value="9">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
            </select>
            <select id="birthday">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>                             
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>                
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
            </select>
            <select id="birthyear">
                <option value="1">2012</option>
				<option value="2">2011</option>
				<option value="3">2010</option>
				<option value="4">2009</option>
				<option value="5">2008</option>
				<option value="6">2007</option>
				<option value="7">2006</option>
				<option value="8">2005</option>
				<option value="9">2004</option>
				<option value="10">2003</option>
				<option value="11">2002</option>
				<option value="12">2001</option>
				<option value="13">2000</option>
				<option value="14">1999</option>
				<option value="15">1998</option>
				<option value="16">1997</option>
				<option value="17">1996</option>
				<option value="18">1995</option>
				<option value="19">1994</option>
				<option value="20">1993</option>
				<option value="21">1992</option>
				<option value="22">1991</option>
				<option value="23">1990</option>
				<option value="24">1989</option>
				<option value="25">1988</option>
				<option value="26">1987</option>
				<option value="27">1986</option>
				<option value="28">1985</option>
				<option value="29">1984</option>
				<option value="30">1983</option>
				<option value="31">1982</option>
				<option value="32">1981</option>
				<option value="33">1980</option>
				<option value="34">1979</option>
				<option value="35">1978</option>
				<option value="36">1977</option>
				<option value="37">1976</option>
				<option value="38">1975</option>
				<option value="39">1974</option>
				<option value="40">1973</option>
				<option value="41">1972</option>
				<option value="42">1971</option>
				<option value="43">1970</option>
				<option value="44">1969</option>
				<option value="45">1968</option>
				<option value="46">1967</option>
				<option value="47">1966</option>
				<option value="48">1965</option>
				<option value="49">1964</option>
				<option value="50">1963</option>
				<option value="51">1962</option>
				<option value="52">1961</option>
				<option value="53">1960</option>
				<option value="54">1959</option>
				<option value="55">1958</option>
				<option value="56">1957</option>
				<option value="57">1956</option>
				<option value="58">1955</option>
				<option value="59">1954</option>
				<option value="60">1953</option>
				<option value="61">1952</option>
				<option value="62">1951</option>
				<option value="63">1950</option>
				<option value="64">1949</option>
				<option value="65">1948</option>
				<option value="66">1947</option>
				<option value="67">1946</option>
				<option value="68">1945</option>
				<option value="69">1944</option>
				<option value="70">1943</option>
				<option value="71">1942</option>
				<option value="72">1941</option>
				<option value="73">1940</option>
				<option value="74">1939</option>
				<option value="75">1938</option>
				<option value="76">1937</option>
				<option value="77">1936</option>
				<option value="78">1935</option>
				<option value="79">1934</option>
				<option value="80">1933</option>
				<option value="81">1932</option>
				<option value="82">1931</option>
				<option value="83">1930</option>
				<option value="84">1929</option>
				<option value="85">1928</option>
				<option value="86">1927</option>
				<option value="87">1926</option>
				<option value="88">1925</option>
				<option value="89">1924</option>
				<option value="90">1923</option>
				<option value="91">1922</option>
				<option value="92">1921</option>
				<option value="93">1920</option>
				<option value="94">1919</option>
				<option value="95">1918</option>
				<option value="96">1917</option>
				<option value="97">1916</option>
				<option value="98">1915</option>
				<option value="99">1914</option>
				<option value="100">1913</option>
				<option value="101">1912</option>
				<option value="102">1911</option>
				<option value="103">1910</option>
				<option value="104">1909</option>
				<option value="105">1908</option>
				<option value="106">1907</option>
				<option value="107">1906</option>
				<option value="108">1905</option>
				<option value="109">1904</option>
				<option value="110">1903</option>
				<option value="111">1902</option>
				<option value="112">1901</option>
				<option value="113">1900</option>
            </select>
        </fieldset>
        <fieldset>
            <legend>Address Information</legend>
            <label>Address</label>
            <input id="address" type="text" maxlength="120" value=""/> 
            <label>City</label>
            <input id="city" type="text" maxlength="120" value=""/>           
            <label>State</label>
            <select id="state" name="state">
				<option value="AL">AL</option>
				<option value="AK">AK</option>
				<option value="AZ">AZ</option>
				<option value="AR">AR</option>
				<option value="CA">CA</option>
				<option value="CO">CO</option>
				<option value="CT">CT</option>
				<option value="DE">DE</option>
				<option value="DC">DC</option>
				<option value="FL">FL</option>
				<option value="GA">GA</option>
				<option value="HI">HI</option>
				<option value="ID">ID</option>
				<option value="IL">IL</option>
				<option value="IN">IN</option>
				<option value="IA">IA</option>
				<option value="KS">KS</option>
				<option value="KY">KY</option>
				<option value="LA">LA</option>
				<option value="ME">ME</option>
				<option value="MD">MD</option>
				<option value="MA">MA</option>
				<option value="MI">MI</option>
				<option value="MN">MN</option>
				<option value="MS">MS</option>
				<option value="MO">MO</option>
				<option value="MT">MT</option>
				<option value="NE">NE</option>
				<option value="NV">NV</option>
				<option value="NH">NH</option>
				<option value="NJ">NJ</option>
				<option value="NM">NM</option>
				<option value="NY">NY</option>
				<option value="NC">NC</option>
				<option value="ND">ND</option>
				<option value="OH">OH</option>
				<option value="OK">OK</option>
				<option value="OR">OR</option>
				<option value="PA">PA</option>
				<option value="RI">RI</option>
				<option value="SC">SC</option>
				<option value="SD">SD</option>
				<option value="TN">TN</option>
				<option value="TX">TX</option>
				<option value="UT">UT</option>
				<option value="VT">VT</option>
				<option value="VA">VA</option>
				<option value="WA">WA</option>
				<option value="WV">WV</option>
				<option value="WI">WI</option>
				<option value="WY">WY</option>
			</select>            
            <label>Zip</label>
            <input id="zipcode" type="text" maxlength="120" value=""/> 
        </fieldset>
        <fieldset>
            <legend>Contact Information</legend>     
            <label>Email</label>
            <input id="email" type="text" maxlength="120" value=""/>
            <label>Phone</label>
            <input id="phone" type="text" maxlength="120" value=""/>
            <label>Medication</label>
            <textarea id="medication" rows="10" cols="30"> </textarea>  
            <label>Family History</label>
            <textarea id="familyhistory" rows="10" cols="30"> </textarea>           	      
        </fieldset> 
        <fieldset>
        	<a class="button" onClick="javascript:connectPatient()">Update Information</a>
        </fieldset>  
    </form>
    </div>
	</body>
</html>